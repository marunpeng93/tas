(function(r,f){if(typeof define==='function'&&define.amd){define(function(){return f(r,r.document)})}else if(typeof exports==='object'){module.exports=r.document?f(r,r.document):function(w){return f(w,w.document)}}else{r.tas=f(r,r.document)}}(typeof window!=='undefined'?window:this,function(window,document){return function(t){function n(o){if(e[o])return e[o].exports;var i=e[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){!function(){arguments[0](e(1))}(function(n){t.exports=n})},function(t,n,e){!function(){arguments[0](e(2),e(29),e(9),e(19))}(function(n,e,o,i){var c={break:function(t){n.break(t)},abort:function(t){n.abort(t)},reset:function(){n.reset()}},r={await:function(){n.await([].slice.call(arguments))},next:function(){n.next([].slice.call(arguments))}},u={promise:function(){n.promise([].slice.call(arguments))},all:function(){n.all([].slice.call(arguments))},race:function(){n.race([].slice.call(arguments))},cancel:function(t){n.cancel(t)}};Object.defineProperty(n.entry,"layer",{get:function(){return o.get()}}),Object.defineProperty(n.entry,"maxLayer",{get:function(){return i.get()+1}}),t.exports=e.object.extend(n.entry,c,r,u)})},function(t,n,e){!function(){arguments[0](e(3),e(24),e(26),e(29))}(function(n,e,o,i){var c={entry:function(){c.do([].slice.call(arguments))},do:function(t){n.do(t)},break:function(t){n.break(t)},abort:function(t){n.abort(t)}},r={await:function(t){t.await=!0,c.do(t)},next:function(t){e.next(t)}},u={promise:function(t){u.convert(t,"promise")},all:function(t){u.convert(t,"all")},race:function(t){u.convert(t,"race")},convert:function(t,n){var e="",i={};({setDescribe:function(){return"string"==typeof t[0]&&(e=t.shift()),this},convertFuncToObj:function(){var n={};return t[0]instanceof Function&&(t.forEach(function(t,e){n["t"+(e+1)]=t}),t=[n]),this},packPromiseTask:function(){return i["Promise "+n]=function(){o[n](t[0])},this},applyToAwait:function(){var t=[i];return e&&t.unshift(e),r.await(t),this}}).setDescribe().convertFuncToObj().packPromiseTask().applyToAwait()},cancel:function(t){o.cancel(t)}};t.exports=i.object.extend(c,r,u)})},function(t,n,e){!function(){arguments[0](e(4))}(function(n){var e={do:function(t){n.do(t)},break:function(t){n.break(t)},abort:function(t){n.abort(t)},reset:function(){n.reset()}};t.exports=e})},function(t,n,e){!function(){arguments[0](e(5),e(10),e(22))}(function(n,e,o){var i={do:function(t){n.add(t),!o.isAbort.get()&&i.exec()},exec:function(){var t=n.getNextTasks();e.do(i,t)},break:function(t){t&&console.log(t),e.break()},abort:function(t){t&&console.log(t),o.isAbort.set()},reset:function(){o.reset()},getNextTasks:function(t){return n.getNextTasks(t)}};t.exports=i})},function(t,n,e){!function(){arguments[0](e(6),e(8))}(function(n,e){var o={add:function(t){var o,c=t.await;({saveDescribe:function(){return"string"==typeof t[0]&&(o=t.shift()),this},packFunctions:function(){if(t[0]instanceof Function){var n={};t.forEach(function(t,e){n["t"+(e+1)]=t}),t=[n]}return this},saveTasks:function(){return t.forEach(function(r,u){n.add(),r.name||(r.name=i.getObjName(o,t,n.get(),u)),c&&(r.await=!0),e.saveTasks(r)}),this}}).saveDescribe().packFunctions().saveTasks()},getNextTasks:function(t){return e.getNextTasks(t)}},i={getObjName:function(t,n,e,o){var i="";return i=t?t:"Tasks["+e+"]"}};t.exports=o})},function(t,n,e){!function(){arguments[0](e(7))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n){!function(){var n={value:0,get:function(){return this.value},add:function(){this.value++},sub:function(){this.value--},set:function(t){this.value=t},save:function(t){this.set(t)}};t.exports=n}()},function(t,n,e){!function(){arguments[0](e(9))}(function(n){var e={data:{},saveTasks:function(t){var e=n.get();t.layer=e,"undefined"==typeof this.data[e]&&(this.data[e]=[]),this.data[e].push(t)},getNextTasks:function(t){return this.data[t||n.get()].shift()}};t.exports=e})},function(t,n,e){!function(){arguments[0](e(7))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n,e){!function(){arguments[0](e(11),e(12),e(20),e(15),e(22))}(function(n,e,o,i,c){var r={tas:{},do:function(t,e){r.tas=t,n.add(e),r.exec(e.layer)},exec:function(t){o.do(r,t)},run:function(t){return e.do(t)},break:function(){i.isBreak.set()}};t.exports=r})},function(t,n){!function(){var n={},e={add:function(t){var e=t.layer;({initThisLayer:function(){return"undefined"==typeof n[e]&&(n[e]=[]),this},addFunctions:function(){return o.getFunctions(e,t,t,t.name,n[e]),this},setIndex:function(){return n[e].forEach(function(t,n){t.index=n}),this},setNext:function(){var t=n[e];return t.forEach(function(n,e){e!==t.length-1&&(n.next=t[e+1])}),this}}).initThisLayer().addFunctions().setIndex().setNext()},getNextFunc:function(t){return n[t].shift()},clearRemainFunctions:function(t){var e,o=t.root,i=n[t.layer];for(e=0;e<i.length;e++)i[e].root===o&&(i.splice(e,1),e--)}},o={getFunctions:function(t,n,e,i,c){Object.keys(e).forEach(function(r){var u=i+"."+r,a=e[r];"object"==typeof a&&o.getFunctions(t,n,a,u,c),"function"==typeof a&&(a.keyPath=u,a.name=r,a.parent=e,a.root=n,a.layer=t,c.push(a))})}};t.exports=e}()},function(t,n,e){!function(){arguments[0](e(13),e(15),e(9))}(function(n,e,o){var i={do:function(t){e.maxLayer.set(o.get()),o.add();var i=t.apply(t.root,n.getArguments());return i instanceof Array&&n.saveArguments(i),o.sub(),i}};t.exports=i})},function(t,n,e){!function(){arguments[0](e(14))}(function(n){var e=Object.create(n);e.saveArguments=e.set,e.getArguments=e.get,t.exports=e})},function(t,n){!function(){var n={data:[],get:function(){return this.data},set:function(t){this.data=t},pop:function(){return this.data.pop()},push:function(t){this.data.push(t)},shift:function(){return this.data.shift()},unshift:function(t){this.data.unshift(t)}};t.exports=n}()},function(t,n,e){t.exports={isGoNext:e(16),isBreak:e(18),maxLayer:e(19),reset:function(){this.isGoNext.reset(),this.isBreak.reset()}}},function(t,n,e){!function(){arguments[0](e(17))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n){!function(){var n=!1,e={value:n,get:function(){return this.value},set:function(t){"undefined"==typeof t&&(t=!n),this.value=t},reset:function(){this.set(n)}};t.exports=e}()},function(t,n,e){!function(){arguments[0](e(17))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n,e){!function(){arguments[0](e(7))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n,e){!function(){arguments[0](e(21),e(11),e(15),e(22))}(function(n,e,o,i){var c={do:function(t,c){var r,u,a;if(!n.isAbortTas()){for(;r=e.getNextFunc(c);){if(o.reset(),u=t.run(r),n.isAbortTas(u)){i.isAbort.set();break}if(n.isBreakCurrentTasks(u)){a=!0;break}if(n.isIgnoreThisFunc(u)&&o.isGoNext.set(),n.isAwaitInSyncFunc(u)){i.isAbort.set();break}if(!n.isSyncTasksFunc(r)&&!n.isGoNext()&&n.isAwaitTasksFunc(r)){i.isAbort.set();break}}a&&e.clearRemainFunctions(r)}}};t.exports=c})},function(t,n,e){!function(){arguments[0](e(15),e(22))}(function(n,e){var o={isAwaitTasksFunc:function(t){return t.root.await},isAwaitInSyncFunc:function(t){return"await"===t},isBreakCurrentTasks:function(t){return"break"===t||t===!1||n.isBreak.get()},isAbortTas:function(t){return"abort"===t||e.isAbort.get()},isIgnoreThisFunc:function(t){return"ignore"===t},isSyncTasksFunc:function(t){return!o.isAwaitTasksFunc(t)},isGoNext:function(){return n.isGoNext.get()}};t.exports=o})},function(t,n,e){!function(){arguments[0](e(23))}(function(n){t.exports={isAbort:n,reset:function(){n.reset()}}})},function(t,n,e){!function(){arguments[0](e(17))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n,e){!function(){arguments[0](e(25),e(22),e(13),e(15))}(function(n,e,o,i){var c={next:function(t){o.saveArguments(t),i.isGoNext.set(),e.isAbort.get()&&n.do()}};t.exports=c})},function(t,n,e){!function(){arguments[0](e(22),e(4),e(9),e(10),e(15))}(function(n,e,o,i,c){var r={do:function(){({setState:function(){return n.isAbort.set(!1),this},handleTheTasks:function(){for(var t,r=c.maxLayer.get();r>=0;){for(o.set(r),i.exec(r);!n.isAbort.get()&&(t=e.getNextTasks(r));)n.reset(),i.do(e,t);r--}return this}}).setState().handleTheTasks()}};t.exports=r})},function(t,n,e){!function(){arguments[0](e(27),e(28),e(24))}(function(n,e,o){var i={promise:function(t){t.done=function(t,n){i.done([t,n])},i.exec(t)},all:function(t){n.do(t,i)},race:function(t){e.do(t,i)},exec:function(t){Object.defineProperty(t,"done",{enumerable:!1}),Object.keys(t).forEach(function(n){t[n]()})},done:function(t){o.next(t)},cancel:function(t){e.cancel(t)}};t.exports=i})},function(t,n){!function(){var n={do:function(t,n){var e=Object.keys(t).length,o=0,i=null,c=[];t.done=function(t,r){o++,t&&(i=t),c.push(r),o===e&&n.done([i,c])},n.exec(t)}};t.exports=n}()},function(t,n){!function(){var n={do:function(t,n){var e=0;t.done=function(t,o){1===++e&&n.done([t,o])},n.exec(t)},cancel:function(t){t&&t instanceof Array&&t.forEach(function(t){t.abort?"undefined"!=typeof XMLHttpRequest&&t instanceof XMLHttpRequest?t.readyState!==XMLHttpRequest.UNSENT&&t.abort():t.abort():clearTimeout(t)})}};t.exports=n}()},function(t,n,e){t.exports={object:e(30),string:e(31)}},function(t,n){!function(){var n={extend:function(){var t=[].slice.call(arguments),n=t.length>1?t.shift():{},e={do:function(t,n){Object.keys(n).forEach(function(e){"undefined"==typeof t[e]&&(t[e]=n[e])})}};return t.forEach(function(t){e.do(n,t)}),n}};t.exports=n}()},function(t,n){!function(){var n={repeat:function(t,n){return new Array(n+1).join(t)}};t.exports=n}()}]);}));