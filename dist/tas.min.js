(function(r,f){if(typeof define==='function'&&define.amd){define(function(){return f(r,r.document)})}else if(typeof exports==='object'){module.exports=r.document?f(r,r.document):function(w){return f(w,w.document)}}else{r.tas=f(r,r.document)}}(typeof window!=='undefined'?window:this,function(window,document){return function(n){function t(o){if(e[o])return e[o].exports;var i=e[o]={exports:{},id:o,loaded:!1};return n[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){n.exports=e(1)},function(n,t,e){!function(){arguments[0](e(2),e(28),e(9),e(19))}(function(t,e,o,i){var c={break:function(n){t.break(n)},abort:function(n){t.abort(n)},reset:function(){t.reset()}},r={await:function(){t.await([].slice.call(arguments))},next:function(){t.next([].slice.call(arguments))}},u={promise:function(){t.promise([].slice.call(arguments))},all:function(){t.all([].slice.call(arguments))},race:function(){t.race([].slice.call(arguments))},cancel:function(n){t.cancel(n)}},a={forEach:function(){t.forEach([].slice.call(arguments))}};Object.defineProperty(t.entry,"layer",{get:function(){return o.get()}}),Object.defineProperty(t.entry,"maxLayer",{get:function(){return i.get()+1}}),n.exports=e.object.extend(t.entry,c,r,u,a)})},function(n,t,e){!function(){arguments[0](e(3),e(24),e(31),e(35),e(28))}(function(t,e,o,i,c){var r={entry:function(){r.do([].slice.call(arguments))},do:function(n){t.do(n)},break:function(n){t.break(n)},abort:function(n){t.abort(n)},reset:function(){t.reset()}},u={await:function(n){e.await(n)},next:function(n){e.next(n)}},a={promise:function(n){o.convert(n,"promise")},all:function(n){o.convert(n,"all")},race:function(n){o.convert(n,"race")},cancel:function(n){o.cancel(n)}},f={forEach:function(n){i.forEach(n)}};n.exports=c.object.extend(r,u,a,f)})},function(n,t,e){!function(){arguments[0](e(4))}(function(t){var e={do:function(n){t.do(n)},break:function(n){t.break(n)},abort:function(n){t.abort(n)},reset:function(){t.reset()}};n.exports=e})},function(n,t,e){!function(){arguments[0](e(5),e(10),e(22))}(function(t,e,o){var i={do:function(n){t.add(n),!o.isAbort.get()&&i.exec()},exec:function(){var n=t.getNextTasks();e.do(i,n)},break:function(n){n&&console.log(n),e.break()},abort:function(n){n&&console.log(n),o.isAbort.set()},reset:function(){o.reset()},getNextTasks:function(n){return t.getNextTasks(n)}};n.exports=i})},function(n,t,e){!function(){arguments[0](e(6),e(8))}(function(t,e){var o={add:function(n){var o,i;({saveDescribe:function(){return"string"==typeof n[0]&&(o=n.shift()),"object"==typeof n[0]&&(i=n[0]),this},packFunctions:function(){return n[0]instanceof Function&&(i={},n.forEach(function(n,t){i["t"+(t+1)]=n})),this},saveTasks:function(){return i.name=o?o:"Tasks["+t.add()+"]",e.saveTasks(i),this}}).saveDescribe().packFunctions().saveTasks()},getNextTasks:function(n){return e.getNextTasks(n)}};n.exports=o})},function(n,t,e){!function(){arguments[0](e(7))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t){!function(){var t={value:0,get:function(){return this.value},add:function(){return this.value++,this.value},sub:function(){return this.value--,this.value},set:function(n){this.value=n},save:function(n){this.set(n)}};n.exports=t}()},function(n,t,e){!function(){arguments[0](e(9))}(function(t){var e={data:{},saveTasks:function(n){var e=t.get();n.layer=e,"undefined"==typeof this.data[e]&&(this.data[e]=[]),this.data[e].push(n)},getNextTasks:function(n){return this.data[n||t.get()].shift()}};n.exports=e})},function(n,t,e){!function(){arguments[0](e(7))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t,e){!function(){arguments[0](e(11),e(12),e(20),e(15))}(function(t,e,o,i){var c={tas:{},do:function(n,e){c.tas=n,t.add(e),c.exec(e.layer)},exec:function(n){o.do(c,n)},run:function(n){return e.do(n)},break:function(){i.isBreak.set()}};n.exports=c})},function(n,t){!function(){var t={},e={add:function(n){var e=n.layer;({initThisLayer:function(){return"undefined"==typeof t[e]&&(t[e]=[]),this},addFunctions:function(){return o.getFunctions(e,n,n,n.name,t[e]),this},setIndex:function(){return t[e].forEach(function(n,t){n.index=t}),this},setNext:function(){var n=t[e];return n.forEach(function(t,e){e!==n.length-1&&(t.next=n[e+1])}),this}}).initThisLayer().addFunctions().setIndex().setNext()},getNextFunc:function(n){return t[n].shift()},clearRemainFunctions:function(n){var e,o=n.root,i=t[n.layer];for(e=0;e<i.length;e++)i[e].root===o&&(i.splice(e,1),e--)}},o={getFunctions:function(n,t,e,i,c){Object.keys(e).forEach(function(r){var u=i+"."+r,a=e[r];"object"==typeof a&&o.getFunctions(n,t,a,u,c),"function"==typeof a&&(a.keyPath=u,a.name=r,a.parent=e,a.root=t,a.layer=n,c.push(a))})}};n.exports=e}()},function(n,t,e){!function(){arguments[0](e(13),e(15),e(9))}(function(t,e,o){var i={do:function(n){e.maxLayer.set(o.get()),o.add();var i=n.apply(n.root,t.getArguments());return i instanceof Array&&t.saveArguments(i),o.sub(),i}};n.exports=i})},function(n,t,e){!function(){arguments[0](e(14))}(function(t){var e=Object.create(t);e.saveArguments=e.set,e.getArguments=e.get,n.exports=e})},function(n,t){!function(){var t={data:[],get:function(){return this.data},set:function(n){this.data=n},pop:function(){return this.data.pop()},push:function(n){this.data.push(n)},shift:function(){return this.data.shift()},unshift:function(n){this.data.unshift(n)}};n.exports=t}()},function(n,t,e){n.exports={isGoNext:e(16),isBreak:e(18),maxLayer:e(19),reset:function(){this.isGoNext.reset(),this.isBreak.reset()}}},function(n,t,e){!function(){arguments[0](e(17))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t){!function(){var t=!1,e={value:t,get:function(){return this.value},set:function(n){"undefined"==typeof n&&(n=!t),this.value=n},reset:function(){this.set(t)}};n.exports=e}()},function(n,t,e){!function(){arguments[0](e(17))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t,e){!function(){arguments[0](e(7))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t,e){!function(){arguments[0](e(21),e(11),e(15),e(22))}(function(t,e,o,i){var c={do:function(n,c){var r,u,a;if(!t.isAbortTas()){for(;r=e.getNextFunc(c);){if(o.reset(),u=n.run(r),t.isAbortTas(u)){i.isAbort.set();break}if(t.isBreakCurrentTasks(u)){a=!0;break}if(t.isIgnoreThisFunc(u)&&o.isGoNext.set(),t.isAwaitInSyncFunc(u)){i.isAbort.set();break}if(!t.isSyncTasksFunc(r)&&!t.isGoNext()&&t.isAwaitTasksFunc(r)){i.isAbort.set();break}}a&&e.clearRemainFunctions(r)}}};n.exports=c})},function(n,t,e){!function(){arguments[0](e(15),e(22))}(function(t,e){var o={isAwaitTasksFunc:function(n){return n.await||n.root.await},isAwaitInSyncFunc:function(n){return"await"===n},isBreakCurrentTasks:function(n){return"break"===n||n===!1||t.isBreak.get()},isAbortTas:function(n){return"abort"===n||e.isAbort.get()},isIgnoreThisFunc:function(n){return"ignore"===n},isSyncTasksFunc:function(n){return!o.isAwaitTasksFunc(n)},isGoNext:function(){return t.isGoNext.get()}};n.exports=o})},function(n,t,e){!function(){arguments[0](e(23))}(function(t){n.exports={isAbort:t,reset:function(){t.reset()}}})},function(n,t,e){!function(){arguments[0](e(17))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t,e){!function(){arguments[0](e(25),e(26))}(function(t,e){var o={await:function(n){t.init(n)},next:function(n){e.do(n)}};n.exports=o})},function(n,t,e){!function(){arguments[0](e(3))}(function(t){var e={init:function(n){this.mark(n),t.do(n)},mark:function(n){n.forEach(function(n){n instanceof Object&&(n.await=!0)})}};n.exports=e})},function(n,t,e){!function(){arguments[0](e(22),e(4),e(9),e(10),e(13),e(15),e(27))}(function(t,e,o,i,c,r,u){var a={do:function(n){c.saveArguments(n),r.isGoNext.set(),t.isAbort.get()&&(t.isAbort.set(!1),a.resume())},resume:function(){for(var n,c=r.maxLayer.get();c>=0;){for(o.set(c),i.exec(c);!t.isAbort.get()&&(n=e.getNextTasks(c));)t.reset(),n.forEach===!0?u.do(e,n):i.do(e,n);c--}}};n.exports=a})},function(n,t,e){!function(){arguments[0](e(3),e(10),e(13),e(22),e(28))}(function(t,e,o,i,c){var r={init:function(n){this.mark(n),t.do(n)},mark:function(n){n.forEach(function(n){n instanceof Object&&(n.forEach=!0)})},do:function(n,t){var r=o.getArguments();if(r&&r instanceof Array&&r[0]instanceof Array){var u=r[0];u.find(function(o){if(i.isAbort.get()===!0)return o;var r=c.object.cloneMethods(t);"function"==typeof r.init&&(r.init(o),delete r.init),e.do(n,r)})}}};n.exports=r})},function(n,t,e){n.exports={object:e(29),string:e(30)}},function(n,t){!function(){var t={do:function(n,t,e){Object.keys(t).forEach(function(o){"undefined"!=typeof n[o]||e&&!e(t,n,o)||(n[o]=t[o])})}},e={extend:function(){var n=[].slice.call(arguments),e=n.length>1?n.shift():{};return n.forEach(function(n){t.do(e,n)}),e},cloneMethods:function(){var n=[].slice.call(arguments),e=n.length>1?n.shift():{},o=function(n,t,e){return"function"==typeof n[e]};return n.forEach(function(n){t.do(e,n,o)}),e}};n.exports=e}()},function(n,t){!function(){var t={repeat:function(n,t){return new Array(t+1).join(n)}};n.exports=t}()},function(n,t,e){!function(){arguments[0](e(32),e(33),e(34),e(24))}(function(t,e,o,i){var c={promise:function(n){n.done=function(n,t){c.done([n,t])},c.exec(n)},all:function(n){t.do(n,c)},race:function(n){e.do(n,c)},exec:function(n){Object.defineProperty(n,"done",{enumerable:!1}),Object.keys(n).forEach(function(t){n[t]()})},done:function(n){i.next(n)},cancel:function(n){e.cancel(n)},convert:function(n,t){o.do(n,t,c,i)}};n.exports=c})},function(n,t){!function(){var t={do:function(n,t){var e=Object.keys(n).length,o=0,i=null,c=[];n.done=function(n,r){o++,n&&(i=n),c.push(r),o===e&&t.done([i,c])},t.exec(n)}};n.exports=t}()},function(n,t){!function(){var t={do:function(n,t){var e=0;n.done=function(n,o){1===++e&&t.done([n,o])},t.exec(n)},cancel:function(n){n&&n instanceof Array&&n.forEach(function(n){n.abort?"undefined"!=typeof XMLHttpRequest&&n instanceof XMLHttpRequest?n.readyState!==XMLHttpRequest.UNSENT&&n.abort():n.abort():clearTimeout(n)})}};n.exports=t}()},function(n,t){!function(){var t={do:function(n,t,e,o){var i="",c={};({setDescribe:function(){return"string"==typeof n[0]&&(i=n.shift()),this},convertFuncToObj:function(){var t={};return n[0]instanceof Function&&(n.forEach(function(n,e){t["t"+(e+1)]=n}),n=[t]),this},packPromiseTask:function(){return c["promise_"+t]=function(){e[t](n[0])},this},applyToAwait:function(){var n=[c];return i&&n.unshift(i),o.await(n),this}}).setDescribe().convertFuncToObj().packPromiseTask().applyToAwait()}};n.exports=t}()},function(n,t,e){!function(){arguments[0](e(27))}(function(t){var e={forEach:function(n){t.init(n)}};n.exports=e})}]);}));