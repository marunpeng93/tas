(function(r,f){if(typeof define==='function'&&define.amd){define(function(){return f(r,r.document)})}else if(typeof exports==='object'){module.exports=r.document?f(r,r.document):function(w){return f(w,w.document)}}else{r.tas=f(r,r.document)}}(typeof window!=='undefined'?window:this,function(window,document){return function(t){function n(a){if(e[a])return e[a].exports;var i=e[a]={exports:{},id:a,loaded:!1};return t[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(1)},function(t,n,e){var a=e(2),i=e(4),o=e(7),s=e(6),r=e(8),c=e(9),u=e(10),f=function(t){if(u.is())u.do(t);else if(s.isAbort())return;i.add(t)};f.await=function(t){u.is()&&u.do(t),t.isAwait=!0,i.add(t)},f.promise=function(t){f.await(t)},f.next=function(t,n){var e=arguments.length;2===e?o.save2(t,n):1===e?o.save1(arguments[0]):0===e?o.save0():o.saveArray(Array.prototype.slice.call(arguments)),a.next()},f.resolve=function(t,n){o.save2(t,n),a.next()},f.break=function(){c.do()},f.abort=function(t){r.do(t)},f.begin=function(){u.set()},function(t){e(11).init(t),e(12).init(t),e(13).init(t),e(15).init(t)}(f),t.exports=f},function(t,n,e){var a,i,o=e(3),s=(e(4),e(5)),r=e(7),c=e(6),u=e(8),f=e(9),l={exec:function(t){var n=o.flag;if(!n.isAwait)for(var e,a,i=l.runFunc;(e=t.shift())&&(a=i(e),!n.isAwait);)if("await"===a||!0===e.isAwait){n.isAwait=!0;break}},execFunc:function(t){var n=o.flag;if(!n.isAwait){"await"!==l.runFunc(t)&&!0!==t.isAwait||(n.isAwait=!0)}},runFunc:function(t){var n=o.extensions.isForEachEnabled;o.extensions.isTreeEnabled&&a.tree.print(t),o.maxLayer=o.layer,o.layer++;var e=o.pass,s=e.isHasArgs?t.apply(null,e):t();return n&&t.isTheLastFunc&&t.root.isForEach?i.loop():void 0===s?r.save0():Array.isArray(s)?r.save(s):"break"===s?f.do():"abort"===s?u.do():"continue"===s?i.continue():"breakForEach"===s?i.breakForEach():r.save1(s),o.layer>0&&o.layer--,s},next:function(){var t,n,e=o,a=e.flag,r=e.extensions.isForEachEnabled,u=e.maxLayer;for(a.isAwait=!1;u>=0;){if(e.layer=u,e.units[u]&&e.units[u].length&&l.exec(e.units[u]),void 0!==(n=e.tasks[u]))for(;!a.isAwait&&(t=n.shift());)a.isAwait=!1,"function"==typeof t?l.execFunc(t):r&&!0===t.isForEach?i.exec(t):s.do(t);u--}e.tasks[0]&&!e.tasks[0].length&&c.setIsAwait(!1)},saveTas:function(t){a=t},saveForEach:function(t){i=t}};t.exports.__proto__=l},function(t,n){var e={layer:0,maxLayer:0,tasks:{},units:{},pass:[],flag:{isAwait:!1,isAbort:!1},extensions:{isPromiseAllEnabled:!1,isPromiseRaceEnabled:!1,isForEachEnabled:!1,isTreeEnabled:!1}};t.exports=e},function(t,n,e){var a=e(3),i=e(2),o=e(5),s=(e(6),{add:function(t){var n=a,e=n.flag,s=typeof t;"function"!==s||n.layer||e.isAwait?("object"===s&&!t.isTheLastFunctionMarked&&this.markTheLastFunction(t),this.addToLayer(t),!e.isAwait&&o.do(n.tasks[n.layer].shift())):i.execFunc(t)},addToLayer:function(t){var n=a,e=n.layer,i=n.tasks;t.layer=e,void 0===i[e]&&(i[e]=[]),i[e].push(t)},markTheLastFunction:function(t){for(var n,e=Object.keys(t),a=e.length-1;a>=0&&"function"!=typeof(n=t[e[a]]);a--);n.isTheLastFunc=!0,t.isTheLastFunctionMarked=!0},clearTheRemainingTasks:function(){var t,n,e=a,i=e.maxLayer;for(n=i;n>=0;n--)e.units[n]&&(e.units[n].length=0);for(n=i;n>0;n--)e.tasks[n]&&(e.tasks[n].length=0);for(t=e.tasks[0];t&&t.length&&!t[0].isFirst;)t.shift()}});t.exports.__proto__=s},function(t,n,e){var a,i=e(3),o=e(2),s={},r={do:function(t){this.add(t);var n=i.units[t.layer];n&&n.length&&o.exec(n)},add:function(t){var n=i,e=t.layer||0;s.layer=e,s.root=t,void 0===n.units[e]&&(n.units[e]=[]);var o=n.units[e],r=i.extensions.isTreeEnabled;r&&a.tree.nested.createFnForBegin(o);var c=t;if("function"==typeof t){var u={};u[t.name]=t,u.isAwait=t.isAwait,c=u}this.getAllFunctions(e,c,c,c.isAwait,o,0),r&&a.tree.nested.createFnForEnd(o)},getAllFunctions:function t(n,e,o,s,r,c){for(var u,f,l=Object.keys(o),d=i.extensions.isTreeEnabled,v=0,p=l.length;v<p;v++)u=l[v],f=o[u],"object"==typeof f?(d&&a.tree.nested.createFnForAdd(u,r,c),t(n,e,f,s,r,c+1),d&&a.tree.nested.createFnForSub(r,c)):"function"==typeof f&&(f.root=e,f.layer=n,f.isAwait=s,r.push(f),d&&(f.treeBranch=u),d&&(f.treeIndent=a.tree.nested.getCount()+c))},clearTheRemainingFunctions:function(){for(var t=i,n=s.layer,e=s.root,a=t.units[n],o=0,r=a.length;o<r;o++)a[o]&&a[o].root===e&&a.shift()},saveTas:function(t){a=t}};t.exports.__proto__=r},function(t,n,e){var a=e(3),i={isAbort:function(){return a.flag.isAbort},setIsAbort:function(t){a.flag.isAbort=t},setIsAwait:function(t){a.flag.isAwait=t}};t.exports.__proto__=i},function(t,n,e){var a=e(3),i={save:function(t){var n=t.length;2===n?this.save2(t[0],t[1]):1===n?this.save1(t[0]):0===n?this.save0():this.saveArray(t)},save0:function(){var t=a;t.pass[0]=void 0,t.pass[1]=void 0,t.pass.isHasArgs=!1},save1:function(t){var n=a;n.pass[0]=t,n.pass[1]=void 0,n.pass.isHasArgs=!0},save2:function(t,n){var e=a;e.pass[0]=t,e.pass[1]=n,e.pass.isHasArgs=!0},saveArray:function(t){var n=a;n.pass=t,n.pass.isHasArgs=!0},reset:function(){a.pass.length=0,a.pass.isHasArgs=!1}};t.exports.__proto__=i},function(t,n,e){var a=e(4),i=e(7),o=e(2),s=e(6),r={do:function(t){t&&console.log(t),a.clearTheRemainingTasks(),i.reset(),o.next(),s.setIsAbort(!0)}};t.exports.__proto__=r},function(t,n,e){var a=e(5),i={do:function(){a.clearTheRemainingFunctions()}};t.exports.__proto__=i},function(t,n,e){var a=e(6),i={f:!1,do:function(t){return this.f=!1,t.isFirst=!0,a.setIsAbort(!1),t},is:function(){return this.f},set:function(){this.f=!0}};t.exports=i},function(t,n,e){(function(n){var a,i=e(3),o=e(2),s=e(5),r={count:0,add:function(){r.count++},sub:function(){r.count--},getCount:function(){return r.count},createFnForBegin:function(t){var n=function(){r.add()};n.__isIgnore=!0,t.push(n)},createFnForEnd:function(t){var n=function(){r.sub()};n.__isIgnore=!0,t.push(n)},createFnForAdd:function(t,n,e){var a=function(){r.add()};a.treeIndent=r.getCount()+e,a.__isIgnore=!0,a.__realName=t,n.push(a)},createFnForSub:function(t,n){var e=function(){!i.flag.isAwait&&r.sub()};e.treeIndent=r.getCount()+n,e.__isIgnore=!0,t.push(e)}},c={lastTreeIndent:0,getStr:function(t){var n=c.lastTreeIndent+1+(void 0===t?0:t),e=l.repeat(" ",4*(n-1));return("  "+n).substr(-2)+"|"+e}},u={data:[],isSaveToArr:!1,begin:function(){u.isSaveToArr=!0,u.data.length=0},save:function(t){u.data.push(t)},getStr:function(){return u.data.join("\n")}},f={init:function(t){a=t,o.saveTas(a),s.saveTas(a),a.tree=this,a.tree.logArray=u,a.tree.nested=r,a.enableTree=this.enable,a.disableTree=this.disable},enable:function(){i.extensions.isTreeEnabled=!0},disable:function(){i.extensions.isTreeEnabled=!1},print:function(t){var n=t.__isIgnore?t.__realName:t.treeBranch||t.name;if(n){void 0!==t.treeIndent&&(c.lastTreeIndent=t.treeIndent);var e=c.getStr();l.log(e,n)}},log:function(){var t=Array.prototype.slice.call(arguments),n=c.getStr(1);t.unshift(n),l.log.apply(null,t)}},l={log:function(){var t=Array.prototype.slice.call(arguments);if(u.isSaveToArr)u.save(t[0]+" "+t[1]);else{!("object"==typeof n?n:"object"==typeof window?window:{}).isDisabledLog&&console.log.apply(console,t)}},repeat:function(t,n){return new Array(n+1).join(t)}};t.exports.__proto__=f}).call(n,function(){return this}())},function(t,n,e){var a,i,o,s=e(3),r=e(2),c=e(4),u=e(5),f=e(7),l=0,d={init:function(t){a=t,r.saveForEach(this),a.forEach=this.forEach,a.continue=this.continue,a.breakForEach=this.breakForEach,s.extensions.isForEachEnabled=!0},forEach:function(t){t.isForEach=!0,c.markTheLastFunction(t),s.flag.isAwait?c.add(t):d.exec(t)},exec:function(t){i=s.pass[0].slice(),o=t,l=0,d.loop()},loop:function(){for(var t=s,n=t.flag;!n.isAwait&&i.length;)t.layer++,f.save2(i.shift(),l++),c.add(o),t.layer--},continue:function(){u.clearTheRemainingFunctions(),d.loop()},breakForEach:function(){u.clearTheRemainingFunctions(),i.length=0}};t.exports.__proto__=d},function(t,n,e){var a,i=e(3),o=e(14),s={init:function(t){a=t,a.all=this.all,i.extensions.isPromiseAllEnabled=!0},all:function(t){var n=Object.keys(t).length,e=0,i=[],s={done:function(t,o){e++,i.push(o),(t||e===n)&&a.resolve(t,i)},abort:function(){a.abort(),this.done("abort")}};a.await(o.convert(t,s))}};t.exports.__proto__=s},function(t,n){var e={convert:function(t,n){return function(){for(var e=Object.keys(t),a=0;a<e.length;a++)t[e[a]].call(n)}}};t.exports.__proto__=e},function(t,n,e){var a,i=e(3),o=e(6),s=e(14),r={init:function(t){a=t,a.race=this.race,a.cancel=this.cancel,i.extensions.isPromiseRaceEnabled=!0},race:function(t){var n=0,e={done:function(t,e){1==++n&&a.resolve(t,e)},abort:function(){o.setIsAwait(!1),a.abort()}};a.await(s.convert(t,e))},cancel:function(t){t&&t instanceof Array&&t.forEach(function(t){t.abort?"undefined"!=typeof XMLHttpRequest&&t instanceof XMLHttpRequest?t.readyState!==XMLHttpRequest.UNSENT&&t.abort():t.abort():clearTimeout(t)})}};t.exports.__proto__=r}]);}));