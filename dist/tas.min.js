(function(r,f){if(typeof define==='function'&&define.amd){define(function(){return f(r,r.document)})}else if(typeof exports==='object'){module.exports=r.document?f(r,r.document):function(w){return f(w,w.document)}}else{r.tas=f(r,r.document)}}(typeof window!=='undefined'?window:this,function(window,document){return function(t){function n(o){if(e[o])return e[o].exports;var i=e[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(1)},function(t,n,e){!function(){arguments[0](e(2),e(28),e(8),e(21))}(function(n,e,o,i){var c={break:function(t){n.break(t)},abort:function(t){n.abort(t)},reset:function(){n.reset()}},r={await:function(){n.await([].slice.call(arguments))},next:function(){n.next([].slice.call(arguments))}},u={promise:function(){n.promise([].slice.call(arguments))},all:function(){n.all([].slice.call(arguments))},race:function(){n.race([].slice.call(arguments))},cancel:function(t){n.cancel(t)}},a={forEach:function(){n.forEach([].slice.call(arguments))}};Object.defineProperty(n.entry,"layer",{get:function(){return o.get()}}),Object.defineProperty(n.entry,"maxLayer",{get:function(){return i.get()+1}}),t.exports=e.object.extend(n.entry,c,r,u,a)})},function(t,n,e){!function(){arguments[0](e(3),e(32),e(35),e(39),e(28))}(function(n,e,o,i,c){var r={entry:function(){r.do([].slice.call(arguments))},do:function(t){n.do(t)},break:function(t){n.break(t)},abort:function(t){n.abort(t)},reset:function(){n.reset()}},u={await:function(t){e.await(t)},next:function(t){e.next(t)}},a={promise:function(t){o.convert(t,"promise")},all:function(t){o.convert(t,"all")},race:function(t){o.convert(t,"race")},cancel:function(t){o.cancel(t)}},s={forEach:function(t){i.forEach(t)}};t.exports=c.object.extend(r,u,a,s)})},function(t,n,e){!function(){arguments[0](e(4))}(function(n){var e={do:function(t){n.do(t)},break:function(t){n.break(t)},abort:function(t){n.abort(t)},reset:function(){n.reset()}};t.exports=e})},function(t,n,e){!function(){arguments[0](e(5),e(10),e(24),e(31))}(function(n,e,o,i){var c={do:function(t){n.add(t),!o.isAbort.get()&&c.exec()},exec:function(){var t=n.getNextTasks();t.forEach===!0?i.do(c,t):e.do(c,t)},break:function(t){t&&console.log(t),e.break()},abort:function(t){t&&console.log(t),o.isAbort.set()},reset:function(){o.reset(),n.clear(),e.clear()},getNextTasks:function(t){return n.getNextTasks(t)},fixLayer:function(t){n.fixLayer(t)}};t.exports=c})},function(t,n,e){!function(){arguments[0](e(6),e(8),e(9))}(function(n,e,o){var i={add:function(t){var e,i;({saveDescribe:function(){return"string"==typeof t[0]&&(e=t.shift()),"object"==typeof t[0]&&(i=t[0]),this},packLog:function(){if(0===t.length){var n=e;t[0]=function(){console.log(n)},e=""}return this},packFunctions:function(){return t[0]instanceof Function&&(i={},t.forEach(function(t,n){i["t"+(n+1)]=t})),this},saveTasks:function(){return i.name=e?e:"Tasks["+n.add()+"]",o.saveTasks(i),this}}).saveDescribe().packLog().packFunctions().saveTasks()},clear:function(){n.clear(),o.clear()},getNextTasks:function(t){return o.getNextTasks(t)},fixLayer:function(t){"undefined"==typeof t.layer&&(t.layer=e.get())}};t.exports=i})},function(t,n,e){!function(){arguments[0](e(7))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n){!function(){var n={value:0,get:function(){return this.value},add:function(){return this.value++,this.value},sub:function(){return this.value--,this.value},set:function(t){this.value=t},save:function(t){this.set(t)},clear:function(){this.value=0}};t.exports=n}()},function(t,n,e){!function(){arguments[0](e(7))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n,e){!function(){arguments[0](e(8))}(function(n){var e={data:{},saveTasks:function(t){var e=n.get();t.layer=e,"undefined"==typeof this.data[e]&&(this.data[e]=[]),this.data[e].push(t)},getNextTasks:function(t){var e=this.data[t||n.get()];return e?e.shift():null},clear:function(){this.data={},n.clear()}};t.exports=e})},function(t,n,e){!function(){arguments[0](e(11),e(12),e(22),e(17))}(function(n,e,o,i){var c={tas:{},do:function(t,e){c.tas=t,t.fixLayer(e),n.add(e),c.exec(e.layer)},exec:function(t){o.do(c,t)},run:function(t){return e.do(t)},break:function(){i.isBreak.set()},clear:function(){n.clear()}};t.exports=c})},function(t,n){!function(){var n={},e={add:function(t){var e=t.layer;({initThisLayer:function(){return"undefined"==typeof n[e]&&(n[e]=[]),this},addFunctions:function(){return o.getFunctions(e,t,t,t.name,n[e]),this},setIndex:function(){return n[e].forEach(function(t,n){t.index=n}),this},setNext:function(){var t=n[e];return t.forEach(function(n,e){e!==t.length-1&&(n.next=t[e+1])}),this},setLast:function(){var t=n[e];return t[t.length-1].isLast=!0,this}}).initThisLayer().addFunctions().setIndex().setNext().setLast()},getNextFunc:function(t){var e=n[t];return e?e.shift():null},clearRemainFunctions:function(t){var e,o=t.root,i=n[t.layer];for(e=0;e<i.length;e++)i[e].root===o&&(i.splice(e,1),e--)},clear:function(){n={}}},o={getFunctions:function(t,n,e,i,c){Object.keys(e).forEach(function(r){var u=i+"."+r,a=e[r];"object"==typeof a&&o.getFunctions(t,n,a,u,c),"function"==typeof a&&(a.keyPath=u,a.name=r,a.parent=e,a.root=n,a.layer=t,c.push(a))})}};t.exports=e}()},function(t,n,e){!function(){arguments[0](e(13),e(15),e(17),e(8))}(function(n,e,o,i){var c={do:function(t){o.maxLayer.set(i.get()),i.add();var c=t.apply(t.root,n.getArguments());return c instanceof Array?n.saveArguments(c):"string"==typeof c&&e.save(c),i.sub(),c}};t.exports=c})},function(t,n,e){!function(){arguments[0](e(14))}(function(n){var e=Object.create(n);e.saveArguments=e.set,e.getArguments=e.get,t.exports=e})},function(t,n){!function(){var n={data:[],get:function(){return this.data},set:function(t){this.data=t},pop:function(){return this.data.pop()},push:function(t){this.data.push(t)},shift:function(){return this.data.shift()},unshift:function(t){this.data.unshift(t)},clear:function(){this.data=[]}};t.exports=n}()},function(t,n,e){!function(){arguments[0](e(16))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n){!function(){var n={data:"",get:function(){return this.data},set:function(t){this.data=t},save:function(t){this.set(t)}};t.exports=n}()},function(t,n,e){t.exports={isGoNext:e(18),isBreak:e(20),maxLayer:e(21),reset:function(){this.isGoNext.reset(),this.isBreak.reset()}}},function(t,n,e){!function(){arguments[0](e(19))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n){!function(){var n=!1,e={value:n,get:function(){return this.value},set:function(t){"undefined"==typeof t&&(t=!n),this.value=t},reset:function(){this.set(n)},clear:function(){this.value=n}};t.exports=e}()},function(t,n,e){!function(){arguments[0](e(19))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n,e){!function(){arguments[0](e(7))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n,e){!function(){arguments[0](e(23),e(11),e(17),e(24))}(function(n,o,i,c){var r={do:function(t,r){var u,a,s,f;if(!n.isAbortTas()){for(;u=o.getNextFunc(r);){if(n.isForEachFunc(u)&&u.isLast===!0&&(f=!0),i.reset(),a=t.run(u),n.isAbortTas(a)){c.isAbort.set();break}if(n.isBreakCurrentTasks(a)){s=!0;break}if(n.isIgnoreThisFunc(a)&&i.isGoNext.set(),n.isAwaitInSyncFunc(a)){c.isAbort.set();break}if(!n.isSyncTasksFunc(u)&&!n.isGoNext()&&n.isAwaitTasksFunc(u)){c.isAbort.set();break}}if(s)o.clearRemainFunctions(u);else if(f){var d=e(26);d.do()}}}};t.exports=r})},function(t,n,e){!function(){arguments[0](e(17),e(24))}(function(n,e){var o={isAwaitTasksFunc:function(t){return t.await||t.root.await},isAwaitInSyncFunc:function(t){return"await"===t},isBreakCurrentTasks:function(t){return"break"===t||t===!1||n.isBreak.get()},isAbortTas:function(t){return"abort"===t||e.isAbort.get()},isIgnoreThisFunc:function(t){return"ignore"===t},isSyncTasksFunc:function(t){return!o.isAwaitTasksFunc(t)},isGoNext:function(){return n.isGoNext.get()},isForEachFunc:function(t){return t.root.forEach===!0}};t.exports=o})},function(t,n,e){!function(){arguments[0](e(25))}(function(n){t.exports={isAbort:n,reset:function(){n.reset()}}})},function(t,n,e){!function(){arguments[0](e(19))}(function(n){var e=Object.create(n);t.exports=e})},function(t,n,e){!function(){arguments[0](e(27),e(24),e(10),e(28))}(function(n,e,o,i){var c={do:function(){if(e.isAbort.get()!==!0){var t=n.getElements(),c=n.getTas(),r=n.getTasks(),u=n.getIndex(),a=t.shift();if(a){var s=i.object.extend(r);"function"==typeof s.init&&(s.init(a,u,t),delete s.init),o.do(c,s)}}}};t.exports=c})},function(t,n){!function(){var n={data:{},currentId:null,save:function(t,n,e){var o=Date.now();return this.currentId=o,this.data[o]={elements:t,tas:n,tasks:e,index:-1},o},get:function(t,n){return this.data[t||this.currentId][n]},set:function(t,n,e){return this.data[t||this.currentId][n]=e},getElements:function(t){return this.get(t,"elements")},getTas:function(t){return this.get(t,"tas")},getTasks:function(t){return this.get(t,"tasks")},getIndex:function(t){var n=this.get(t,"index");return this.set(t,"index",n++),n}};t.exports=n}()},function(t,n,e){t.exports={object:e(29),string:e(30)}},function(t,n){!function(){var n={do:function(t,n,e){Object.keys(n).forEach(function(o){"undefined"!=typeof t[o]||e&&!e(n,t,o)||(t[o]=n[o])})}},e={extend:function(){var t=[].slice.call(arguments),e=t.length>1?t.shift():{};return t.forEach(function(t){n.do(e,t)}),e},cloneMethods:function(){var t=[].slice.call(arguments),e=t.length>1?t.shift():{},o={do:function(t,n,e){return"function"==typeof t[e]}};return t.forEach(function(t){n.do(e,t,o.do)}),e}};t.exports=e}()},function(t,n){!function(){var n={repeat:function(t,n){return new Array(n+1).join(t)}};t.exports=n}()},function(t,n,e){!function(){arguments[0](e(26),e(27),e(13))}(function(n,e,o){var i={do:function(t,i){var c=o.getArguments();if(c&&c instanceof Array&&c[0]instanceof Array){var r=c[0];e.save(r,t,i),n.do()}}};t.exports=i})},function(t,n,e){!function(){arguments[0](e(33),e(34))}(function(n,e){var o={await:function(t){n.init(t)},next:function(t){e.do(t)}};t.exports=o})},function(t,n,e){!function(){arguments[0](e(3))}(function(n){var e={init:function(t){this.mark(t),n.do(t)},mark:function(t){t.forEach(function(t){t instanceof Object&&(t.await=!0)})}};t.exports=e})},function(t,n,e){!function(){arguments[0](e(24),e(4),e(8),e(10),e(13),e(17),e(31))}(function(n,e,o,i,c,r,u){var a={do:function(t){c.saveArguments(t),r.isGoNext.set(),n.isAbort.set(!1),a.resume()},resume:function(){for(var t,c=r.maxLayer.get();c>=0;){for(o.set(c),i.exec(c);!n.isAbort.get()&&(t=e.getNextTasks(c));)n.reset(),t.forEach===!0?u.do(e,t):i.do(e,t);c--}}};t.exports=a})},function(t,n,e){!function(){arguments[0](e(36),e(37),e(38),e(32))}(function(n,e,o,i){var c={promise:function(t){t.done=function(t,n){c.done([t,n])},c.exec(t)},all:function(t){n.do(t,c)},race:function(t){e.do(t,c)},exec:function(t){Object.defineProperty(t,"done",{enumerable:!1}),Object.keys(t).forEach(function(n){t[n]()})},done:function(t){i.next(t)},cancel:function(t){e.cancel(t)},convert:function(t,n){o.do(t,n,c,i)}};t.exports=c})},function(t,n){!function(){var n={do:function(t,n){var e=Object.keys(t).length,o=0,i=null,c=[];t.done=function(t,r){o++,t&&(i=t),c.push(r),o===e&&n.done([i,c])},n.exec(t)}};t.exports=n}()},function(t,n){!function(){var n={do:function(t,n){var e=0;t.done=function(t,o){1===++e&&n.done([t,o])},n.exec(t)},cancel:function(t){t&&t instanceof Array&&t.forEach(function(t){t.abort?"undefined"!=typeof XMLHttpRequest&&t instanceof XMLHttpRequest?t.readyState!==XMLHttpRequest.UNSENT&&t.abort():t.abort():clearTimeout(t)})}};t.exports=n}()},function(t,n){!function(){var n={do:function(t,n,e,o){var i="",c={};({setDescribe:function(){return"string"==typeof t[0]&&(i=t.shift()),this},convertFuncToObj:function(){var n={};return t[0]instanceof Function&&(t.forEach(function(t,e){n["t"+(e+1)]=t}),t=[n]),this},packPromiseTask:function(){return c["promise_"+n]=function(){e[n](t[0])},this},applyToAwait:function(){var t=[c];return i&&t.unshift(i),o.await(t),this}}).setDescribe().convertFuncToObj().packPromiseTask().applyToAwait()}};t.exports=n}()},function(t,n,e){!function(){arguments[0](e(40))}(function(n){var e={forEach:function(t){n.init(t)}};t.exports=e})},function(t,n,e){!function(){arguments[0](e(3))}(function(n){var e={init:function(t){this.mark(t),n.do(t)},mark:function(t){t.forEach(function(t){t instanceof Object&&(t.forEach=!0)})}};t.exports=e})}]);}));